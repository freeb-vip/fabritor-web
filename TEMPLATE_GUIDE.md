# 模板管理功能使用说明

## 功能概述

fabritor-web 现在支持将您的设计保存为模板，并存储在本地电脑上（使用浏览器的 localStorage）。您可以随时加载、管理和分享您的模板。

## 功能特性

### 1. 保存模板
- 将当前设计保存为模板
- 为模板命名和添加描述
- 自动生成缩略图预览
- 记录创建时间

### 2. 管理模板
- 查看所有已保存的模板
- 预览模板缩略图
- 加载模板到画布
- 删除不需要的模板
- 导出所有模板为 JSON 文件
- 从 JSON 文件导入模板

### 3. 数据存储
- 所有模板数据存储在浏览器的 localStorage 中
- 数据保存在本地电脑，不会上传到服务器
- 清除浏览器数据会删除保存的模板

## 使用方法

### 保存当前设计为模板

1. 完成您的设计
2. 点击右上角的 **"保存为模板"** 按钮（图标：💾）
3. 在弹出的对话框中：
   - 输入模板名称（必填）
   - 输入模板描述（可选）
4. 点击 **"确认"** 按钮
5. 模板保存成功后会显示提示消息

### 管理已保存的模板

1. 点击右上角的 **"我的模板"** 按钮（图标：📁）
2. 在模板管理面板中，您可以：
   - **查看所有模板**：显示模板名称、描述、缩略图和创建时间
   - **加载模板**：点击 **"加载"** 按钮将模板加载到画布
   - **删除模板**：点击 **"删除"** 按钮并确认删除

### 导出和导入模板

#### 导出所有模板

1. 打开 **"我的模板"** 面板
2. 点击底部的 **"导出所有模板"** 按钮
3. 系统会下载一个 JSON 文件，包含所有模板数据
4. 文件名格式：`fabritor_templates_[时间戳].json`

#### 导入模板

1. 打开 **"我的模板"** 面板
2. 点击底部的 **"导入模板"** 按钮
3. 选择之前导出的 JSON 文件
4. 导入的模板会合并到现有模板列表中

## 技术实现

### 数据结构

每个模板包含以下信息：

```typescript
interface Template {
  id: string;              // 唯一标识符
  name: string;            // 模板名称
  description?: string;    // 模板描述（可选）
  thumbnail?: string;      // 缩略图（base64 格式）
  json: any;              // Fabric.js 画布 JSON 数据
  createdAt: number;      // 创建时间戳
  updatedAt: number;      // 更新时间戳
}
```

### 存储位置

- **localStorage key**: `fabritor_templates`
- **存储格式**: JSON 字符串
- **数据位置**: 浏览器本地存储

### API 函数

模板管理提供以下工具函数（位于 `src/utils/template.ts`）：

- `getAllTemplates()`: 获取所有模板
- `saveTemplate(template)`: 保存新模板
- `updateTemplate(id, updates)`: 更新模板
- `deleteTemplate(id)`: 删除模板
- `getTemplate(id)`: 获取单个模板
- `clearAllTemplates()`: 清空所有模板
- `exportTemplates()`: 导出所有模板为文件
- `importTemplates(file)`: 从文件导入模板

## 注意事项

### 浏览器兼容性

- 需要支持 localStorage 的现代浏览器
- 推荐使用 Chrome、Firefox、Edge、Safari 最新版本

### 存储限制

- localStorage 通常有 5-10MB 的存储限制
- 建议不要保存过多的大型模板
- 如果模板很多，可以定期导出备份并清理

### 数据安全

- 模板数据仅存储在您的本地浏览器中
- 清除浏览器缓存/数据会删除所有模板
- **重要**：定期使用"导出所有模板"功能备份您的模板

### 隐私模式

- 在浏览器的隐私/无痕模式下，localStorage 数据可能在关闭窗口后被清除
- 建议在正常模式下使用模板功能

## 常见问题

### Q: 我的模板可以在不同电脑上使用吗？

A: 模板存储在浏览器本地，需要通过"导出"功能将模板文件下载，然后在另一台电脑上通过"导入"功能加载。

### Q: 如果清除了浏览器数据，模板会丢失吗？

A: 是的。建议定期导出模板备份。

### Q: 可以保存多少个模板？

A: 理论上没有数量限制，但受 localStorage 存储空间限制（通常 5-10MB）。

### Q: 模板数据会上传到服务器吗？

A: 不会。所有模板数据都存储在您的本地浏览器中，完全离线可用。

### Q: 可以与他人分享模板吗？

A: 可以。导出模板文件后，将 JSON 文件分享给他人，他们可以通过"导入"功能加载。

## 更新日志

### v3.0.2 (2025-12-13)
- ✨ 新增模板保存功能
- ✨ 新增模板管理面板
- ✨ 支持模板缩略图预览
- ✨ 支持模板导出/导入
- 🌐 添加中英文国际化支持
- 📝 完善用户文档

## 反馈与建议

如果您在使用模板功能时遇到任何问题，或有改进建议，欢迎通过 GitHub Issues 反馈。
